<!doctype html>
<html lang="en" class="light">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.png" type="image/png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AMZ Ofertas - Marketing Digital com IA para Empresas</title>
    <meta name="description" content="Plataforma completa de gest√£o de marketing digital para pequenas e m√©dias empresas. Crie posts profissionais com IA e agende para Instagram e Facebook. Teste gr√°tis por 7 dias." />
    <meta name="keywords" content="marketing digital, gest√£o redes sociais, posts autom√°ticos, IA marketing, Instagram, Facebook, PME" />
    <meta name="author" content="AMZ Ofertas" />

    <meta property="og:title" content="AMZ Ofertas - Marketing Digital com IA para Empresas" />
    <meta property="og:description" content="Automatize suas redes sociais com intelig√™ncia artificial. Crie conte√∫do profissional e agende posts. Ideal para pequenas e m√©dias empresas." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://amzofertas.com.br" />
    <meta property="og:image" content="https://amzofertas.com.br/og-image.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AMZ Ofertas - Marketing Digital com IA" />
    <meta name="twitter:description" content="Plataforma de marketing digital com IA para empresas. Crie e agende posts automaticamente." />
    <meta name="twitter:site" content="@amzofertas" />
    <meta name="twitter:image" content="https://amzofertas.com.br/og-image.png" />
  </head>

  <body>
    <div id="root"></div>
    <script>
      // CORRE√á√ÉO CR√çTICA: Interceptar URLs antigas do Bolt ANTES de qualquer coisa
      (function() {
        const CORRECT_SUPABASE_URL = 'https://zunuqaidxffuhwmvcwul.supabase.co';
        const OLD_URLS = ['qbtqjrcfseqcfmcqlngr', 'gbtqjrcfseqcfmcqlngr', 'jibpvpqgplmahjhswiza'];
        
        function shouldCorrect(url) {
          if (!url) return false;
          const urlStr = typeof url === 'string' ? url : url.toString();
          return OLD_URLS.some(old => urlStr.includes(old));
        }
        
        function correctUrl(url) {
          const urlStr = typeof url === 'string' ? url : url.toString();
          return urlStr.replace(/https?:\/\/([^/]+)\.supabase\.co/g, CORRECT_SUPABASE_URL);
        }
        
        // INTERCEPTAR FETCH - VERS√ÉO MAIS AGRESSIVA
        const originalFetch = window.fetch;
        window.fetch = function(input, init) {
          try {
            let url = typeof input === 'string' ? input : input instanceof URL ? input.toString() : (input && input.url ? input.url : '');
            
            if (shouldCorrect(url)) {
              const correctedUrl = correctUrl(url);
              console.warn('üîß [HTML-FETCH] CORRIGINDO URL:', url.substring(0, 100), '‚Üí', correctedUrl.substring(0, 100));
              
              if (typeof input === 'string') {
                input = correctedUrl;
              } else if (input instanceof URL) {
                input = new URL(correctedUrl);
              } else if (input && input.url) {
                input = new Request(correctedUrl, input);
              } else {
                input = correctedUrl;
              }
            }
          } catch (e) {
            console.error('‚ùå Erro no interceptor fetch:', e);
          }
          
          return originalFetch.call(this, input, init);
        };
        
        // INTERCEPTAR XMLHttpRequest - VERS√ÉO MAIS AGRESSIVA
        const OriginalXHR = window.XMLHttpRequest;
        window.XMLHttpRequest = function() {
          const xhr = new OriginalXHR();
          const originalOpen = xhr.open;
          const originalSend = xhr.send;
          
          xhr.open = function(method, url, ...args) {
            const urlStr = typeof url === 'string' ? url : url.toString();
            if (shouldCorrect(urlStr)) {
              const correctedUrl = correctUrl(urlStr);
              console.warn('üîß [HTML-XHR] CORRIGINDO URL:', urlStr.substring(0, 100), '‚Üí', correctedUrl.substring(0, 100));
              return originalOpen.call(this, method, correctedUrl, ...args);
            }
            return originalOpen.call(this, method, url, ...args);
          };
          
          return xhr;
        };
        
        // INTERCEPTAR SUPABASE CLIENT DIRETAMENTE (se j√° existir)
        if (window.supabase && window.supabase.supabaseUrl) {
          const oldUrl = window.supabase.supabaseUrl;
          if (shouldCorrect(oldUrl)) {
            console.warn('üîß [HTML] Corrigindo supabase.supabaseUrl:', oldUrl, '‚Üí', CORRECT_SUPABASE_URL);
            try {
              window.supabase.supabaseUrl = CORRECT_SUPABASE_URL;
            } catch (e) {
              console.error('‚ùå N√£o foi poss√≠vel corrigir supabase.supabaseUrl:', e);
            }
          }
        }
        
        console.log('‚úÖ [HTML] Interceptores AGRESSIVOS instalados - URLs antigas ser√£o corrigidas automaticamente');
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
